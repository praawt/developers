openapi: 3.0.0
servers:
    - {description: 'Mazurka test hotel', url: 'https://mazurka-booking.windingtree.com'}
info:
    description: 'Winding Tree booking interface.'
    version: 0.7.1
    title: 'WT booking API'
paths:
    /: {get: {summary: 'API info', responses: {'200': {description: 'Basic information about this API instance.', content: {application/json: {schema: {type: object, required: [version], properties: {docs: {type: string, description: 'Link to the API documentation.'}, info: {type: string, description: 'Link to more information about the API.'}, version: {type: string, description: 'Deployed API version number.'}, config: {type: string, description: 'Which config is the API using.'}}}}}}}}}
    /booking: {post: {summary: 'Create booking. Schema to be used depends on WT_SEGMENT this instance is run with.', requestBody: {required: true, content: {application/json: {schema: {oneOf: [{$ref: '#/components/schemas/HotelBooking'}, {$ref: '#/components/schemas/AirlineBooking'}]}}}}, responses: {'200': {description: 'Booking was successfuly processed', content: {application/json: {schema: {type: object, required: [id, status], properties: {id: {$ref: '#/components/schemas/BookingId'}, status: {description: "Status of the created booking. Can be one of the following:\n  - `pending` - The system has accepted the\n    booking request and saved it to be\n    confirmed or rejected later on. The\n    customer can be notified about the\n    final result by e-mail.\n  - `confirmed` - The booking request has\n    been accepted and confirmed by the\n    hotel right away.\n", type: string, enum: [pending, confirmed]}, finalizationUrl: {description: 'URL where the booking can be finalized (e.g. by payment).', type: string, format: uri}}}}}}, '400': {$ref: '#/components/responses/BadRequestError'}, '409': {$ref: '#/components/responses/ConflictError'}, '422': {$ref: '#/components/responses/UnprocessableEntityError'}, '429': {$ref: '#/components/responses/RateLimitedError'}, '502': {$ref: '#/components/responses/BadGatewayError'}, '503': {$ref: '#/components/responses/ServiceUnavailable'}}}}
    '/booking/{bookingId}': {parameters: [{name: bookingId, required: true, in: path, description: 'Booking ID as returned by POST /booking', schema: {$ref: '#/components/schemas/BookingId'}}], delete: {summary: 'Cancel booking', responses: {'204': {description: 'Booking was cancelled.'}, '403': {$ref: '#/components/responses/ForbiddenError'}, '404': {$ref: '#/components/responses/NotFoundError'}, '409': {description: 'Booking cannot be cancelled due to a data conflict.', content: {application/json: {schema: {oneOf: [{$ref: '#/components/schemas/Error'}, {type: object, description: 'Booking has already been cancelled.', properties: {code: {enum: [alreadyCancelled]}}}, {type: object, description: 'Cannot cancel booking due to conflicts in availability data.', properties: {code: {enum: [cannotCancel]}}}]}}}}, '429': {$ref: '#/components/responses/RateLimitedError'}}}}
components:
    responses: {BadRequestError: {description: 'The server does not understand the request (HTTP code 400)', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, RateLimitedError: {description: 'The server applied rate limiting for this IP address', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, ConflictError: {description: 'Booking cannot be executed, for example room types are not available anymore (HTTP code 409)', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, ForbiddenError: {description: 'The requested action is forbidden.', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, UnprocessableEntityError: {description: 'Request body or params validation failed.', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, NotFoundError: {description: 'Resource not found.', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, BadGatewayError: {description: 'Upstream APIs are not responding', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}, ServiceUnavailable: {description: 'Upstream APIs are responding with 503 Service Unavailable', content: {application/json: {schema: {$ref: '#/components/schemas/Error'}}}}}
    schemas: {BookingId: {description: 'Reference ID for this particular booking.', type: string, maxLength: 255}, HotelBooking: {description: 'Booking object passed from a customer to a hotel', type: object, required: [customer, hotelId, booking, pricing], properties: {origin: {description: 'Distribution partner name or where does this booking originate from. This can be a travel agency name, website name etc.', type: string, maxLength: 255}, customer: {$ref: '#/components/schemas/Customer'}, note: {description: 'Additional information passed to a hotel from a customer', type: string, maxLength: 3000}, hotelId: {$ref: '#/components/schemas/windingtree-wt-shared-schemas-EthereumAddressType'}, booking: {$ref: '#/components/schemas/HotelBookingInfo'}, pricing: {$ref: '#/components/schemas/HotelPricing'}}}, Customer: {description: 'Person responsible for this booking who should be contacted by the supplier if needed', type: object, required: [name, surname, email], properties: {name: {type: string, maxLength: 255}, surname: {type: string, maxLength: 255}, address: {$ref: '#/components/schemas/windingtree-wt-shared-schemas-AddressType'}, email: {description: 'E-mail contact', type: string, format: email, example: joseph.urban@example.com, maxLength: 150}, phone: {description: 'Phone number (with country prefix)', type: string, format: phone, maxLength: 18, example: 44123456789}}}, Room: {type: object, required: [id, guestInfoIds], properties: {id: {description: 'Room type ID as stated in the Hotel description document on WT', type: string}, guestInfoIds: {type: array, items: {description: 'Which guests will be staying in this room? The strings should be id fields from guestInfo, so we can match the guests and their additional information when needed.', type: string}}}}, HotelPricing: {type: object, allOf: [{$ref: '#/components/schemas/Pricing'}, {type: object, properties: {components: {$ref: '#/components/schemas/HotelPricingComponents'}}}]}, Pricing: {type: object, required: [currency, total, cancellationFees], properties: {currency: {$ref: '#/components/schemas/windingtree-wt-shared-schemas-CurrencyType'}, total: {description: 'Total price that should be paid. Including taxes - this is subject to change in the future.', type: number, format: float}, cancellationFees: {description: 'Under what conditions can this booking be cancelled and how much will it cost. Note that the cancellation fees should cover the whole period from the moment of booking up to service usage (hotel arrival or flight departure) and should be based on the supplier''s cancellation policy. (Each cancellation fee should correspond to an applicable cancellation policy.)', type: array, minItems: 1, items: {type: object, required: [from, to, amount], properties: {from: {description: 'After which date does this cancellation fee apply (inclusive).', type: string, format: date}, to: {description: 'Until which date does this cancellation policy apply (inclusive).', type: string, format: date}, amount: {description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This means how much money will the airline/hotel keep.', type: number, format: float}}}}}}, HotelPricingComponents: {description: 'All components that form the final and total price.', type: object, properties: {stay: {description: 'Price to be paid for the stay itself', type: array, items: {type: object, required: [date, subtotal], properties: {date: {description: 'To which date this item is related', type: string, format: date}, subtotal: {description: 'Price for all guests for given date', type: number, format: float}, guests: {description: 'List of used rate plans for every guest', type: array, items: {type: object, required: [guestId, ratePlanId, resultingPrice], properties: {guestId: {description: 'To which guest is this related (see guestInfo)', type: string, maxLength: 255}, ratePlanId: {description: 'Which rate plan was used to establish this price', type: string, maxLength: 255}, basePrice: {description: 'Raw price coming from the rate plan itself', type: number, format: float}, resultingPrice: {description: 'Price coming from applying eventual modifiers to the basePrice. This is the price that is part of the subtotal.', type: number, format: float}, modifier: {description: 'Eventually applied RatePlanPriceModifier', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-RatePlanPriceModifier'}}}}}}}}}, HotelBookingInfo: {description: 'Information on the booked property', type: object, required: [arrival, departure, rooms, guestInfo], properties: {arrival: {description: 'At what day will the people arrive', type: string, format: date}, departure: {description: 'At what day will the people depart', type: string, format: date}, guestInfo: {description: 'Additional information on every guest when required', type: array, items: {type: object, required: [id], properties: {id: {description: 'Unique identifier for every guest, it can for example be a numerical ordinal. Every booking originator has to generate this data as it''s used as a base for all other guest-related information (such as total number of guests).', type: string, maxLength: 255}, name: {type: string, maxLength: 255}, surname: {type: string, maxLength: 255}, age: {description: 'Age at the time of arrival', type: number}}}}, rooms: {type: array, description: 'List of rooms that form this booking. If a single room type is booked more than once, it shall be present more than once.', items: {$ref: '#/components/schemas/Room'}}}}, AirlineBooking: {description: 'Booking object passed from a customer to an airline supplier', type: object, required: [customer, airlineId, booking, pricing], properties: {origin: {description: 'Distribution partner name or where does this booking originate from. This can be a travel agency name, website name etc.', type: string, maxLength: 255}, customer: {$ref: '#/components/schemas/Customer'}, note: {description: 'Additional information passed to an airline from a customer', type: string, maxLength: 3000}, airlineId: {$ref: '#/components/schemas/windingtree-wt-shared-schemas-EthereumAddressType'}, booking: {$ref: '#/components/schemas/AirlineBookingInfo'}, pricing: {$ref: '#/components/schemas/Pricing'}}}, AirlineBookingInfo: {description: 'Information on the booked seats.', type: object, required: [flightNumber, flightInstanceId, bookingClasses], properties: {flightNumber: {description: 'Number of the booked flight.', type: string, minLength: 3, maxLength: 7}, flightInstanceId: {description: 'ID of the booked flight.', type: string, maxLength: 255}, bookingClasses: {type: array, items: {type: object, required: [bookingClassId, passengers], properties: {bookingClassId: {type: string}, passengers: {type: array, description: "List of passengers. The length of the list\ncorresponds to the number of seats booked for\nthis class.\n", minItems: 1, items: {$ref: '#/components/schemas/Passenger'}}}}}}}, Passenger: {description: 'Passenger information.', type: object, required: [name, surname], properties: {name: {type: string}, surname: {type: string}}}, Error: {title: Error, description: 'Default schema for errors returned by API.', properties: {status: {type: number, description: 'HTTP status'}, code: {type: string, description: 'Computer-readable error. Use this for comparison.'}, short: {type: string, description: 'Human-readable error with a short description of the error.'}, long: {type: string, description: 'Verbose explanation of what happened.'}}}, windingtree-wt-shared-schemas-Contact: {title: Contact, type: object, properties: {email: {description: 'E-mail contact', type: string, format: email, example: joseph.urban@example.com, maxLength: 150}, phone: {description: 'Phone number (with country prefix and a leading + sign)', type: string, maxLength: 18, example: '+44123456789', format: phone}, url: {description: 'Url to the contact web page', type: string, format: uri}, ethereum: {description: 'Address of wallet on Ethereum', $ref: '#/components/schemas/windingtree-wt-shared-schemas-EthereumAddressType'}, additionalContacts: {description: 'More contact options, such as Whatsapp, WeChat, Telegram, twitter handle, facebook address. Once we see high demand for a particular type of contact, we can promote them to regular contact types.', type: array, items: {type: object, required: [title, value], properties: {title: {description: 'Name of this contact options', type: string, maxLength: 100}, value: {description: 'The actual contact', type: string, maxLength: 100}}}}}}, windingtree-wt-shared-schemas-CancellationPolicy: {title: 'Cancellation policy', type: object, description: 'What is the penalty when a guest/passenger wants to cancel a reservation.', required: [amount], properties: {from: {description: 'After which date does this cancellation policy apply (including). If not present, this policy applies since the beginning of time. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-01-30'}, to: {description: 'Before which date does this cancellation policy apply(including). If not present, this policy applies until the end of the universe. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-02-20'}, deadline: {type: integer, description: 'How many days before hotel arrival or flight departure does this first apply. If not present, this policy applies any time.', example: 30}, amount: {type: number, format: float, description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This means how much money will the hotel keep.', example: 25}}}, windingtree-wt-shared-schemas-AddressType: {title: 'Postal address', description: 'Based on output of Open Street Map''s [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim). For formatting, take a look [here](https://github.com/OpenCageData/address-formatting).', type: object, required: [road, houseNumber, city, countryCode], properties: {houseNumber: {type: string, maxLength: 150}, road: {type: string, maxLength: 150}, city: {type: string, maxLength: 150}, county: {type: string, maxLength: 150}, stateDistrict: {type: string, maxLength: 150}, state: {type: string, maxLength: 150}, postcode: {type: string, maxLength: 13}, countryCode: {type: string, maxLength: 2, minLength: 2, description: 'ISO 3166-1 alpha-2 codes', format: country-code}}}, windingtree-wt-shared-schemas-LegalEntityType: {title: 'Legal entity', type: object, description: 'A legal entity that can be held responsible', required: [name, address, contact], properties: {name: {description: 'Entity''s name as registered with the authorities', type: string, maxLength: 300}, address: {description: 'Entity''s postal address as registered with the authorities', $ref: '#/components/schemas/windingtree-wt-shared-schemas-AddressType'}, contact: {description: 'Any way of contacting the entity', $ref: '#/components/schemas/windingtree-wt-shared-schemas-Contact'}, vatin: {description: 'VAT identification number ([EU](https://en.wikipedia.org/wiki/VAT_identification_number), [US](https://www.irs.gov/individuals/international-taxpayers/taxpayer-identification-numbers-tin), or equivalents)', type: string, maxLength: 50}, lei: {description: 'Legal Entity Identifier as defined in ISO 17442, https://en.wikipedia.org/wiki/Legal_Entity_Identifier', type: string, length: 20}}}, windingtree-wt-shared-schemas-CurrencyType: {title: 'Currency code', type: string, minLength: 3, maxLength: 3, description: 'Three letter ISO 4217 currency code.', format: currency-code}, windingtree-wt-shared-schemas-DescriptionType: {title: 'Markdown description', description: 'Text description in simple Markdown format (bold, italic, titles, line break and paragraph format). Particular flavour of markdown is yet to be decided.', type: string, maxLength: 3000}, windingtree-wt-shared-schemas-EthereumAddressType: {title: 'Ethereum address', type: string, description: 'Ethereum address in hexadecimal format (with leading 0x) or an ENS name.', maxLength: 300}, windingtree-wt-shared-schemas-NameType: {title: 'Entity name', description: 'Human readable name identifying an entity (shown to users in search results, hotel/room details, etc)', type: string, maxLength: 150}, windingtree-wt-shared-schemas-ObjectIdType: {title: ID, description: 'Vendor string ID', type: string, maxLength: 100, example: 1234-abcd}, windingtree-wt-shared-schemas-TimezoneType: {title: 'Timezone code', description: 'Timezone name according to https://www.iana.org/time-zones (refer to zone.tab)', type: string, maxLength: 40, format: timezone}, windingtree-wt-shared-schemas-UriType: {title: URI, description: 'URI for linking resources. The maximal length is 1500 to save space.', type: string, format: uri, maxLength: 1500}, windingtree-wt-shared-schemas-LanguageCodeType: {title: 'Language code', description: 'Two letter language code based on ISO 639-1 standard', type: string, format: language-code, length: 2}, windingtree-wt-hotel-schemas-HotelOnChain: {title: 'WT-Index hotel record', description: 'Hotel record in WT-Index smart contract', type: object, required: [address, manager, dataUri, created], properties: {address: {description: 'Ethereum address of the hotel', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-EthereumAddressType'}, manager: {description: 'Ethereum address of the manager wallet', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-EthereumAddressType'}, dataUri: {description: 'URI of the Hotel data index (pointing off-chain)', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType'}, created: {description: 'Number of a block when the hotel was created', type: integer}}}, windingtree-wt-hotel-schemas-HotelDataIndex: {title: 'Hotel data index', description: 'Landing index for hotel resources. Link to this document is stored in WT-Index smart contract hotel record', type: object, required: [dataFormatVersion, descriptionUri], properties: {dataFormatVersion: {description: 'Version number indicating the data format specification version.', type: string, format: semver, maxLength: 20}, descriptionUri: {description: 'URI pointing to the HotelDescription data resource', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType'}, ratePlansUri: {description: 'URI pointing to RatePlans data resource', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType'}, availabilityUri: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType', description: 'URI pointing to Availability data resource'}, notificationsUri: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType', description: 'URI pointing to an instance of the WT Notification service.'}, bookingUri: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType', description: 'URI pointing to an instance of the WT Booking service.'}, defaultLocale: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-LanguageCodeType', description: 'Code of language in which all textual information for this record is presented. If no default locale is declared, the texts are expected to be in English language.'}}}, windingtree-wt-hotel-schemas-HotelDescription: {title: 'Hotel description', allOf: [{$ref: '#/components/schemas/windingtree-wt-hotel-schemas-HotelDescriptionBase'}, {type: object, required: [name, description, contacts, address, timezone, currency, defaultCancellationAmount]}]}, windingtree-wt-hotel-schemas-HotelDescriptionBase: {title: 'Hotel description base definition', description: 'Basic properties of hotel', type: object, properties: {location: {description: 'Geo-location in GPS format', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-Location'}, name: {description: 'Name of the hotel to display to users', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-NameType'}, operator: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-LegalEntityType'}, description: {description: 'Short text description of the hotel to show to users.', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-DescriptionType'}, roomTypes: {description: 'Room types in the hotel', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-RoomTypes'}, contacts: {type: object, description: 'A set of contacts', required: [general], properties: {general: {description: 'Primary contact', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-Contact'}}}, address: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-AddressType'}, timezone: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-TimezoneType'}, currency: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-CurrencyType'}, spokenLanguages: {description: 'List of languages that people can use when communicating with this hotel.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-LanguageCodeType'}}, category: {description: 'Hotel category for easier filtering. These values are placeholder strings that are coincidentally in English and should be localized by the end user interface.', type: string, enum: [apartment, 'bed and breakfast', boat, cabin, camp, 'holiday home', hostel, hotel, house, inn, 'mobile home', motel, other, spa]}, images: {description: 'Images. We don''t process them in any way, so they should be in the best quality available and in a common format such as JPEG. As we don''t have any tagging, the most important picture should come first.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType'}}, amenities: {description: 'Hotel products/services provided to guests. If a service is stated here, it is provided.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-HotelAmenityItem'}}, tags: {description: 'Free form textual tags that can describe the hotel. These can be eventually used for searching.', type: array, items: {type: string}}, updatedAt: {type: string, description: 'Date-time when the data was last changed. Used by consumers to handle incremental updates and caching.', format: date-time}, defaultCancellationAmount: {type: number, format: float, description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This is a default amount of how much money will the hotel keep if no other cancallation policy is applicable.', example: 25}, cancellationPolicies: {description: 'A list of policies under which it is possible to cancel a reservation.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-CancellationPolicy'}}}}, windingtree-wt-hotel-schemas-RoomTypes: {type: array, description: 'Array of RoomTypes', items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-RoomType'}}, windingtree-wt-hotel-schemas-RoomType: {type: object, required: [id, name, description, occupancy, totalQuantity], properties: {id: {description: 'ID of the room type', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-ObjectIdType', example: 123-afg-34}, name: {description: 'Name of the room type to show to users', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-NameType'}, description: {description: 'Room type description in plain text', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-DescriptionType'}, category: {type: string, description: 'Room category for easier filtering. These values are placeholder strings that are coincidentally in English and should be localized by the end user interface.', enum: [apartment, barn, boat, bungalow, bunk, cabin, condominium, 'double or twin room', 'double room', 'double room single use', duplex, lodge, other, penthouse, 'quadruple room', 'recreation vehicle', room, 'shared room', 'single room', studio, suite, teepee, tent, 'tree house', 'triple room', 'twin room', villa, yurt]}, totalQuantity: {type: integer, format: int32}, occupancy: {type: object, required: [max], properties: {min: {type: integer, format: int32, description: 'Minimal number of occupants to rent the room.', default: 1, example: 1}, max: {type: integer, format: int32, description: 'Maximal number of occupants to rent the room.', example: 3}}}, amenities: {description: 'Room products/services provided to guests. If a service is stated here, it is provided.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-RoomAmenityItem'}}, tags: {description: 'Free form textual tags that can describe the room. These can be eventually used for searching.', type: array, items: {type: string}}, images: {description: 'Images. We don''t process them in any way, so they should be in the best quality available and in a common format such as JPEG. As we don''t have any tagging, the most important picture should come first.', type: array, minItems: 0, maxItems: 30, uniqueItems: true, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-UriType', description: 'image uri', example: 'https://example.com/my-image.jpg'}}, updatedAt: {type: string, format: date-time, description: 'Date-time when the data was last changed. Used by consumers to handle incremental updates and caching.'}}}, windingtree-wt-hotel-schemas-RatePlans: {type: array, description: 'Array of RatePlans', items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-RatePlan'}}, windingtree-wt-hotel-schemas-RatePlan: {description: "Rate plan for specified room types. All prices are meant for a single room for a single night for a single person.\nWe recommend using [wt-pricing-algorithms](https://github.com/windingtree/wt-pricing-algorithms) library for this.\n\nAlgorithm to calculate price\n- choose the currency you want to compute the price in\n- pick the right ratePlan(s) based on the chosen currency, availableForTravel field and provided booking dates\n- check restrictions and drop rate plans that the booking doesn't meet\n- for every rate plan as rp_i\n  - for every person as p_j\n      apply the best of any fitting price modifiers (pro-consumer strategy, this will change)\n      multiply the computed rate by length of stay\n  - store the final price for rp_i\n- compare all final prices and pick the one based on the chosen resolution strategy\n", type: object, required: [id, name, price, roomTypeIds], properties: {id: {description: 'ID of the rate plan', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-ObjectIdType'}, name: {description: 'Name of the rate plan to show to users', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-NameType'}, description: {description: 'Rate plan description in plain text', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-DescriptionType'}, currency: {description: 'Currency in which are all the prices of this rate plan. If not set, the hotel currency setting will be used.', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-CurrencyType'}, price: {type: number, format: float, description: 'Base price for given room type for one night and one person.'}, roomTypeIds: {type: array, description: 'List of all room types that this rate plan applies to', minItems: 1, maxItems: 30, uniqueItems: true, items: {description: 'RoomType id', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-ObjectIdType', example: 123-afg-34}}, updatedAt: {type: string, format: date-time, description: 'Date-time when the data was last changed. Used by consumers to handle incremental updates and caching.'}, availableForReservation: {type: object, description: 'A time period during which this rate plan can be used to compute prices for a booking, i. e. a hotel can have different rate plans that are used for reservations for the same date that are placed in different months. If this restriction is not set, the rate plan can be used for booking with no time restriction.', required: [from, to], properties: {from: {type: string, format: date}, to: {type: string, format: date}}}, availableForTravel: {type: object, description: 'A time period of stay during which this rate plan should be used to compute prices, i. e. prices in this rate plan are applicable in August. If this restriction is not set, the rate plan can be used for booking for any time.', required: [from, to], properties: {from: {type: string, format: date}, to: {type: string, format: date}}}, modifiers: {type: array, description: 'List of price modifiers, i. e. discounts based on length of stay. For now, the list is very limited.', items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-RatePlanPriceModifier'}}, restrictions: {type: object, description: 'Restrictions for this rate plan. If a booking fits all restrictions, this rate plan can be used. If no restrictions are set, rate plan can be applied at any valid time.', properties: {bookingCutOff: {description: 'How many days in advance booking starts / ends. If not specified there is no restriction.', type: object, properties: {min: {type: integer}, max: {type: integer}}}, lengthOfStay: {description: 'How long does the stay have to be to apply this rate plan. If not specified, there is no restriction.', type: object, properties: {min: {type: integer, default: 1}, max: {type: integer}}}}}}}, windingtree-wt-hotel-schemas-RatePlanPriceModifier: {type: object, description: "A set of conditions that can affect the resulting price. If the conditions are met, the modifier is applied to all travellers:\n\nIf a single person is travelling, she will pay 100 EUR. If two people are coming, they will also pay 100 EUR (two times half the price). If three people are coming, they will pay each 50% of base price or 150 EUR in total.\n\n```\n {\n  \"price\": 100,\n  \"modifiers\": [\n    {\n      \"adjustment\": -50,\n      \"unit\": \"percentage\",\n      \"conditions\": {\n        \"minOccupants\": 2\n      }\n    }\n  ]\n}\n```\n", required: [adjustment, unit, conditions], properties: {adjustment: {description: 'How much will the resulting price be adjusted?', type: number, format: float, example: -3.1}, unit: {description: 'In what unit is the adjustment?', type: string, enum: [percentage, absolute]}, conditions: {type: object, properties: {from: {description: 'First day the modifier is applied to (including)', type: string, format: date, example: '2018-01-30'}, to: {description: 'Last day the modifier is applied to (including)', type: string, format: date, example: '2018-02-20'}, minLengthOfStay: {description: 'Minimal length of stay the modifer is applicable to. If there are multiple modifiers with lengthOfStay condition matching the minimal length of stay, the price for the longest length of stay is used.', type: integer}, maxAge: {description: 'The modifier is applicable to occupants of this age or younger at the time of arrival to the stay. If multiple modifiers are specified with different maxAge, the modifier with the lowest fitting limit is applied.', type: integer}, minOccupants: {description: 'The modifier is applicable if there are at least this number of persons staying in a room. If multiple modifiers are specified with different minOccupants, the modifier with the highest fitting limit is applied.', type: integer}}}}}, windingtree-wt-hotel-schemas-Availability: {description: 'Full snapshot of availability in time of `updatedAt`', type: object, required: [roomTypes], properties: {updatedAt: {type: string, format: date-time}, roomTypes: {description: 'Array of AvailabilityForDay', type: array, items: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-AvailabilityForDay'}}}}, windingtree-wt-hotel-schemas-AvailabilityForDay: {type: object, required: [roomTypeId, date, quantity], properties: {roomTypeId: {description: 'The roomTypeId the availability is for', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-ObjectIdType'}, date: {description: 'The date the availability is for', type: string, format: date}, quantity: {description: 'Number of free resources to book for the day', type: integer}, restrictions: {$ref: '#/components/schemas/windingtree-wt-hotel-schemas-AvailabilityRestrictions'}}}, windingtree-wt-hotel-schemas-AvailabilityRestrictions: {description: 'Possible restrictions (this is not exhaustive and we might add more options in the future)', type: object, properties: {noArrival: {type: boolean, description: 'It''s not possible to arrive on this date'}, noDeparture: {type: boolean, description: 'It''s not possible to depart on this date'}}}, windingtree-wt-hotel-schemas-HotelAmenityItem: {title: 'Hotel amenity', description: 'A service/product offered to guests on the hotel level for free. These values are placeholder strings that are coincidentally in English and should be localized by the end user interface.', type: string, enum: ['24-hour front desk', 'airport shuttle', 'air conditioning', bar, disco, 'dry cleaning', 'free parking', 'free wi-fi', 'safe deposit box', 'kid´s day care', 'pets allowed', pool, restaurant, 'room service', 'spa services', 'tennis court', terrace, 'wake up service', 'wheelchair accessible']}, windingtree-wt-hotel-schemas-RoomAmenityItem: {title: 'Room amenity', description: 'A service/product offered to guests on the room level for free. These values are placeholder strings that are coincidentally in English and should be localized by the end user interface.', type: string, enum: ['air conditioning', balcony, crib, 'free toiletries', 'free wi-fi', hairdryer, kitchen, minibar, 'private bathroom', 'safe deposit box', terrace, towels, tv, 'wheelchair accessible']}, windingtree-wt-hotel-schemas-Location: {title: 'GPS location', type: object, description: 'GPS location in decimal format (ISO 6709)', required: [latitude, longitude], properties: {latitude: {type: number, format: float, example: 35.89421911}, longitude: {type: number, format: float, example: 139.94637467}}}, windingtree-wt-hotel-schemas-Contact: {title: Contact, type: object, properties: {email: {description: 'E-mail contact', type: string, format: email, example: joseph.urban@example.com, maxLength: 150}, phone: {description: 'Phone number (with country prefix and a leading + sign)', type: string, maxLength: 18, example: '+44123456789', format: phone}, url: {description: 'Url to the contact web page', type: string, format: uri}, ethereum: {description: 'Address of wallet on Ethereum', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-EthereumAddressType'}, additionalContacts: {description: 'More contact options, such as Whatsapp, WeChat, Telegram, twitter handle, facebook address. Once we see high demand for a particular type of contact, we can promote them to regular contact types.', type: array, items: {type: object, required: [title, value], properties: {title: {description: 'Name of this contact options', type: string, maxLength: 100}, value: {description: 'The actual contact', type: string, maxLength: 100}}}}}}, windingtree-wt-hotel-schemas-CancellationPolicy: {title: 'Cancellation policy', type: object, description: 'What is the penalty when a guest/passenger wants to cancel a reservation.', required: [amount], properties: {from: {description: 'After which date does this cancellation policy apply (including). If not present, this policy applies since the beginning of time. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-01-30'}, to: {description: 'Before which date does this cancellation policy apply(including). If not present, this policy applies until the end of the universe. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-02-20'}, deadline: {type: integer, description: 'How many days before hotel arrival or flight departure does this first apply. If not present, this policy applies any time.', example: 30}, amount: {type: number, format: float, description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This means how much money will the hotel keep.', example: 25}}}, windingtree-wt-hotel-schemas-AddressType: {title: 'Postal address', description: 'Based on output of Open Street Map''s [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim). For formatting, take a look [here](https://github.com/OpenCageData/address-formatting).', type: object, required: [road, houseNumber, city, countryCode], properties: {houseNumber: {type: string, maxLength: 150}, road: {type: string, maxLength: 150}, city: {type: string, maxLength: 150}, county: {type: string, maxLength: 150}, stateDistrict: {type: string, maxLength: 150}, state: {type: string, maxLength: 150}, postcode: {type: string, maxLength: 13}, countryCode: {type: string, maxLength: 2, minLength: 2, description: 'ISO 3166-1 alpha-2 codes', format: country-code}}}, windingtree-wt-hotel-schemas-LegalEntityType: {title: 'Legal entity', type: object, description: 'A legal entity that can be held responsible', required: [name, address, contact], properties: {name: {description: 'Entity''s name as registered with the authorities', type: string, maxLength: 300}, address: {description: 'Entity''s postal address as registered with the authorities', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-AddressType'}, contact: {description: 'Any way of contacting the entity', $ref: '#/components/schemas/windingtree-wt-hotel-schemas-Contact'}, vatin: {description: 'VAT identification number ([EU](https://en.wikipedia.org/wiki/VAT_identification_number), [US](https://www.irs.gov/individuals/international-taxpayers/taxpayer-identification-numbers-tin), or equivalents)', type: string, maxLength: 50}, lei: {description: 'Legal Entity Identifier as defined in ISO 17442, https://en.wikipedia.org/wiki/Legal_Entity_Identifier', type: string, length: 20}}}, windingtree-wt-hotel-schemas-CurrencyType: {title: 'Currency code', type: string, minLength: 3, maxLength: 3, description: 'Three letter ISO 4217 currency code.', format: currency-code}, windingtree-wt-hotel-schemas-DescriptionType: {title: 'Markdown description', description: 'Text description in simple Markdown format (bold, italic, titles, line break and paragraph format). Particular flavour of markdown is yet to be decided.', type: string, maxLength: 3000}, windingtree-wt-hotel-schemas-EthereumAddressType: {title: 'Ethereum address', type: string, description: 'Ethereum address in hexadecimal format (with leading 0x) or an ENS name.', maxLength: 300}, windingtree-wt-hotel-schemas-NameType: {title: 'Entity name', description: 'Human readable name identifying an entity (shown to users in search results, hotel/room details, etc)', type: string, maxLength: 150}, windingtree-wt-hotel-schemas-ObjectIdType: {title: ID, description: 'Vendor string ID', type: string, maxLength: 100, example: 1234-abcd}, windingtree-wt-hotel-schemas-TimezoneType: {title: 'Timezone code', description: 'Timezone name according to https://www.iana.org/time-zones (refer to zone.tab)', type: string, maxLength: 40, format: timezone}, windingtree-wt-hotel-schemas-UriType: {title: URI, description: 'URI for linking resources. The maximal length is 1500 to save space.', type: string, format: uri, maxLength: 1500}, windingtree-wt-hotel-schemas-LanguageCodeType: {title: 'Language code', description: 'Two letter language code based on ISO 639-1 standard', type: string, format: language-code, length: 2}, windingtree-wt-airline-schemas-AirlineOnChain: {title: 'WT-Index airline record', description: 'Airline record in WT-Index smart contract', type: object, required: [address, manager, dataUri, created], properties: {address: {description: 'Ethereum address of the airline', $ref: '#/components/schemas/windingtree-wt-airline-schemas-EthereumAddressType'}, manager: {description: 'Ethereum address of the manager wallet', $ref: '#/components/schemas/windingtree-wt-airline-schemas-EthereumAddressType'}, dataUri: {description: 'URI of the Airline data index (pointing off-chain)', $ref: '#/components/schemas/windingtree-wt-airline-schemas-UriType'}, created: {description: 'Number of a block when the airline was created', type: integer}}}, windingtree-wt-airline-schemas-AirlineDataIndex: {title: 'Airline data index', description: 'Landing index for airline resources. Link to this document is stored in WT-Index smart contract airline record.', type: object, required: [dataFormatVersion, descriptionUri], properties: {dataFormatVersion: {description: 'Version number indicating the data format specification version.', type: string, format: semver, maxLength: 20}, descriptionUri: {description: 'URI pointing to the AirlineDescription data resource', $ref: '#/components/schemas/windingtree-wt-airline-schemas-UriType'}, flightsUri: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-UriType', description: 'URI pointing to Flights data resource'}, notificationsUri: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-UriType', description: 'URI pointing to an instance of the WT Notification service.'}, bookingUri: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-UriType', description: 'URI pointing to an instance of the WT Booking service.'}}}, windingtree-wt-airline-schemas-AirlineDescription: {title: 'Airline description', allOf: [{$ref: '#/components/schemas/windingtree-wt-airline-schemas-AirlineDescriptionBase'}, {type: object, required: [name, code, contacts, updatedAt, defaultCancellationAmount]}]}, windingtree-wt-airline-schemas-AirlineDescriptionBase: {title: 'Airline description.', description: 'Basic properties of an airline.', type: object, properties: {name: {description: 'Name of the airline to display to users', $ref: '#/components/schemas/windingtree-wt-airline-schemas-NameType'}, operator: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-LegalEntityType'}, code: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-AirlineCodeType'}, contacts: {type: object, description: 'A set of contacts.', required: [general], properties: {general: {description: 'Primary contact', $ref: '#/components/schemas/windingtree-wt-airline-schemas-Contact'}}}, updatedAt: {type: string, description: 'Date-time when the data was last changed. Used by consumers to handle incremental updates and caching.', format: date-time}, defaultCancellationAmount: {type: number, format: float, description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This is a default amount of how much money will the airline keep if no other cancallation policy is applicable.', example: 25}, cancellationPolicies: {description: 'A list of policies under which it is possible to cancel a reservation.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-CancellationPolicy'}}}}, windingtree-wt-airline-schemas-Flights: {type: object, description: 'A set of scheduled flights.', required: [updatedAt, items], properties: {items: {type: array, description: 'Array of Flights', items: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-Flight'}}, updatedAt: {description: 'Time of the last update of services information.', type: string, format: date-time}}}, windingtree-wt-airline-schemas-Flight: {type: object, description: 'A single airline service.', required: [id, origin, destination, segments, flightInstances], properties: {id: {description: 'A flight ID.', type: string, maxLength: 255, example: OK0965}, origin: {description: 'IATA code of the origin airport.', $ref: '#/components/schemas/windingtree-wt-airline-schemas-AirportCodeType'}, destination: {description: 'IATA code of the destination airport.', $ref: '#/components/schemas/windingtree-wt-airline-schemas-AirportCodeType'}, equipmentType: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-EquipmentType'}, operatingAirline: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-AirlineCodeType'}, segments: {type: array, minItems: 1, items: {type: object, required: [id, departureAirport, arrivalAirport], properties: {id: {title: 'ID of the flight segment (must be unique for the given flight number).', type: string}, departureAirport: {description: 'IATA code of the departure airport.', $ref: '#/components/schemas/windingtree-wt-airline-schemas-AirportCodeType'}, arrivalAirport: {description: 'IATA code of the arrival airport.', $ref: '#/components/schemas/windingtree-wt-airline-schemas-AirportCodeType'}}}}, flightInstances: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-FlightInstances', description: 'URI pointing to the FlightInstances resource.'}}}, windingtree-wt-airline-schemas-FlightInstances: {description: 'Array of flight instances for a specific flight number.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-FlightInstance'}}, windingtree-wt-airline-schemas-FlightInstance: {type: object, description: 'Data for a specific flight.', required: [id, departureDateTime, segments, bookingClasses, updatedAt], properties: {id: {description: 'A reference flight instance ID to be used during booking.', type: string, maxLength: 255, example: IeKeix6G}, departureDateTime: {description: 'Date and time of departure from the first segment', type: string, format: date-time}, bookingClasses: {description: "Array of price and availability information for\nvarious booking classes of the flight. In the\nfuture, this information might become more granular\n(per segment instead of per flight).\n", type: array, items: {type: object, required: [id, name, fare, availabilityCount], properties: {id: {description: "ID of the booking class to be referenced in\nbooking requests. Should be unique among all\nbooking classes of the flight.\n", type: string, maxLength: 255, example: economy}, name: {description: 'A human-readable name of the booking class.', type: string, maxLength: 255, example: Economy}, fare: {description: 'Fare price, potentially expressed in multiple currencies.', type: array, items: {$ref: '#/components/schemas/windingtree-wt-airline-schemas-Fare'}}, availabilityCount: {type: integer, format: int32}}}}, segments: {description: "An object whose keys are segment IDs (they should match the segment IDs in the Flight data).\nIt specifies information for individual flight segments for the given flight instance.\n", type: object, additionalProperties: {type: object, required: [departureDateTime, arrivalDateTime], properties: {departureDateTime: {description: 'Time of the departure.', type: string, format: date-time}, arrivalDateTime: {description: 'Time of the arrival.', type: string, format: date-time}}}}, updatedAt: {description: 'Time of the last update of flight information.', type: string, format: date-time}}}, windingtree-wt-airline-schemas-Fare: {type: object, required: [amount, currency], properties: {amount: {description: 'Fare price for the flight segment.', type: number, format: float}, currency: {description: 'Fare price currency.', $ref: '#/components/schemas/windingtree-wt-airline-schemas-CurrencyType'}}}, windingtree-wt-airline-schemas-AirlineCodeType: {title: 'Airline Code.', description: 'IATA 2-Letter Airline code.', type: string, minLength: 2, maxLength: 2}, windingtree-wt-airline-schemas-AirportCodeType: {title: 'Airport Code.', description: 'IATA 3-Letter Airport code.', type: string, minLength: 3, maxLength: 3}, windingtree-wt-airline-schemas-EquipmentType: {title: 'Airline equipment type (aircraft).', type: string, maxLength: 255}, windingtree-wt-airline-schemas-Contact: {title: Contact, type: object, properties: {email: {description: 'E-mail contact', type: string, format: email, example: joseph.urban@example.com, maxLength: 150}, phone: {description: 'Phone number (with country prefix and a leading + sign)', type: string, maxLength: 18, example: '+44123456789', format: phone}, url: {description: 'Url to the contact web page', type: string, format: uri}, ethereum: {description: 'Address of wallet on Ethereum', $ref: '#/components/schemas/windingtree-wt-airline-schemas-EthereumAddressType'}, additionalContacts: {description: 'More contact options, such as Whatsapp, WeChat, Telegram, twitter handle, facebook address. Once we see high demand for a particular type of contact, we can promote them to regular contact types.', type: array, items: {type: object, required: [title, value], properties: {title: {description: 'Name of this contact options', type: string, maxLength: 100}, value: {description: 'The actual contact', type: string, maxLength: 100}}}}}}, windingtree-wt-airline-schemas-CancellationPolicy: {title: 'Cancellation policy', type: object, description: 'What is the penalty when a guest/passenger wants to cancel a reservation.', required: [amount], properties: {from: {description: 'After which date does this cancellation policy apply (including). If not present, this policy applies since the beginning of time. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-01-30'}, to: {description: 'Before which date does this cancellation policy apply(including). If not present, this policy applies until the end of the universe. This is related to arrival and departure dates, not the date of the booking.', type: string, format: date, example: '2018-02-20'}, deadline: {type: integer, description: 'How many days before hotel arrival or flight departure does this first apply. If not present, this policy applies any time.', example: 30}, amount: {type: number, format: float, description: 'Cost of cancellation in percents of the final price, 100 means non refundable. This means how much money will the hotel keep.', example: 25}}}, windingtree-wt-airline-schemas-AddressType: {title: 'Postal address', description: 'Based on output of Open Street Map''s [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim). For formatting, take a look [here](https://github.com/OpenCageData/address-formatting).', type: object, required: [road, houseNumber, city, countryCode], properties: {houseNumber: {type: string, maxLength: 150}, road: {type: string, maxLength: 150}, city: {type: string, maxLength: 150}, county: {type: string, maxLength: 150}, stateDistrict: {type: string, maxLength: 150}, state: {type: string, maxLength: 150}, postcode: {type: string, maxLength: 13}, countryCode: {type: string, maxLength: 2, minLength: 2, description: 'ISO 3166-1 alpha-2 codes', format: country-code}}}, windingtree-wt-airline-schemas-LegalEntityType: {title: 'Legal entity', type: object, description: 'A legal entity that can be held responsible', required: [name, address, contact], properties: {name: {description: 'Entity''s name as registered with the authorities', type: string, maxLength: 300}, address: {description: 'Entity''s postal address as registered with the authorities', $ref: '#/components/schemas/windingtree-wt-airline-schemas-AddressType'}, contact: {description: 'Any way of contacting the entity', $ref: '#/components/schemas/windingtree-wt-airline-schemas-Contact'}, vatin: {description: 'VAT identification number ([EU](https://en.wikipedia.org/wiki/VAT_identification_number), [US](https://www.irs.gov/individuals/international-taxpayers/taxpayer-identification-numbers-tin), or equivalents)', type: string, maxLength: 50}, lei: {description: 'Legal Entity Identifier as defined in ISO 17442, https://en.wikipedia.org/wiki/Legal_Entity_Identifier', type: string, length: 20}}}, windingtree-wt-airline-schemas-CurrencyType: {title: 'Currency code', type: string, minLength: 3, maxLength: 3, description: 'Three letter ISO 4217 currency code.', format: currency-code}, windingtree-wt-airline-schemas-DescriptionType: {title: 'Markdown description', description: 'Text description in simple Markdown format (bold, italic, titles, line break and paragraph format). Particular flavour of markdown is yet to be decided.', type: string, maxLength: 3000}, windingtree-wt-airline-schemas-EthereumAddressType: {title: 'Ethereum address', type: string, description: 'Ethereum address in hexadecimal format (with leading 0x) or an ENS name.', maxLength: 300}, windingtree-wt-airline-schemas-NameType: {title: 'Entity name', description: 'Human readable name identifying an entity (shown to users in search results, hotel/room details, etc)', type: string, maxLength: 150}, windingtree-wt-airline-schemas-ObjectIdType: {title: ID, description: 'Vendor string ID', type: string, maxLength: 100, example: 1234-abcd}, windingtree-wt-airline-schemas-TimezoneType: {title: 'Timezone code', description: 'Timezone name according to https://www.iana.org/time-zones (refer to zone.tab)', type: string, maxLength: 40, format: timezone}, windingtree-wt-airline-schemas-UriType: {title: URI, description: 'URI for linking resources. The maximal length is 1500 to save space.', type: string, format: uri, maxLength: 1500}, windingtree-wt-airline-schemas-LanguageCodeType: {title: 'Language code', description: 'Two letter language code based on ISO 639-1 standard', type: string, format: language-code, length: 2}}
